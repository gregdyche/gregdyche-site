{% extends "blog/base.html" %}
{% load static %}

{% block title %}{{ post.title }} - Greg Dyche{% endblock %}

{% block description %}{{ post.content|striptags|truncatewords:25 }}{% endblock %}

{% block extra_css %}
{% if user.is_staff %}
<link rel="stylesheet" href="{% static 'blog/css/frontend-editor.css' %}">
{% endif %}
{% endblock %}

{% block extra_js %}
{% if user.is_staff %}
<script>
    window.isStaffUser = true;
    document.body.dataset.contentId = '{{ post.id }}';
    document.body.dataset.contentType = 'post';
</script>
<script src="{% static 'blog/js/frontend-editor.js' %}"></script>
{% endif %}
{% endblock %}

{% block content %}
<div class="container mt-8">
    <div class="grid grid-cols-1">
        <article class="card">
            <!-- Featured Image -->
            {% if post.get_featured_image_url %}
            <div class="featured-image-container" style="margin-bottom: 2rem;">
                <img src="{{ post.get_featured_image_url }}" alt="{{ post.title }}" 
                     style="width: 100%; height: 300px; object-fit: cover; border-radius: 8px;">
            </div>
            {% endif %}
            
            <header class="card-header">
                <h1 class="card-title" data-editable="title">{{ post.title }}</h1>
                <p class="card-subtitle">Published {{ post.published_date|date:"F j, Y" }}</p>
            </header>
            
            <!-- Subscribe Button -->
            <div class="subscribe-cta">
                <div class="subscribe-cta-content">
                    <div class="subscribe-cta-text">
                        <h3>üì¨ Get updates when I publish new content</h3>
                        <p>Choose the topics you're interested in: Tech, Life Management, or Spiritual Growth</p>
                    </div>
                    <a href="/blog/subscribe/" class="subscribe-cta-button">
                        Subscribe Now
                    </a>
                </div>
            </div>
            
            <div class="card-content" data-editable="content">
                {{ post.content|safe }}
            </div>
        </article>
    </div>
    
    <!-- Navigation back to home -->
    <div class="text-center mt-8">
        <a href="/" class="btn btn-secondary">‚Üê Back to Home</a>
    </div>
</div>
{% endblock %}
