{% extends "blog/base.html" %}
{% load static %}

{% block title %}{{ page.title }} - Greg Dyche{% endblock %}

{% block description %}{{ page.content|striptags|truncatewords:25 }}{% endblock %}

{% block extra_css %}
{% if user.is_staff %}
<link rel="stylesheet" href="{% static 'blog/css/frontend-editor.css' %}">
{% endif %}
{% endblock %}

{% block extra_js %}
{% if user.is_staff %}
<script>
    window.isStaffUser = true;
    document.body.dataset.contentId = '{{ page.id }}';
    document.body.dataset.contentType = 'page';
</script>
<script src="{% static 'blog/js/frontend-editor.js' %}"></script>
{% endif %}
{% endblock %}

{% block content %}
<div class="container mt-8">
    <!-- Hero Section for Landing Page -->
    {% if page.slug == "well-scripted-life-by-greg-dyche" %}
    <section class="hero">
        <h1 class="hero-title">Welcome to Well Scripted Life</h1>
        <p class="hero-subtitle">Modern insights on technology, education, and intentional living by Greg Dyche</p>
    </section>
    {% endif %}
    
    <!-- Main Content Card -->
    <div class="grid grid-cols-1">
        <article class="card">
            {% if page.slug != "well-scripted-life-by-greg-dyche" and not is_homepage %}
            <header class="card-header">
                <h1 class="card-title" data-editable="title">{{ page.title }}</h1>
                {% if page.published_date %}
                <p class="card-subtitle">Published {{ page.published_date|date:"F j, Y" }}</p>
                {% endif %}
            </header>
            {% endif %}
            
            <!-- Subscribe Button (not shown on homepage or services page) -->
            {% if not is_homepage and page.slug != "services" %}
            <div class="subscribe-cta">
                <div class="subscribe-cta-content">
                    <div class="subscribe-cta-text">
                        <h3>ðŸ“¬ Get updates when I publish new content</h3>
                        <p>Choose the topics you're interested in: Tech, Life Management, or Spiritual Growth</p>
                    </div>
                    <a href="/blog/subscribe/" class="subscribe-cta-button">
                        Subscribe Now
                    </a>
                </div>
            </div>
            {% endif %}
            
            <!-- Email Me Button for Services Page -->
            {% if page.slug == "services" %}
            <div class="subscribe-cta">
                <div class="subscribe-cta-content">
                    <div class="subscribe-cta-text">
                        <h3>ðŸ“§ Ready to start?</h3>
                        <p>First call is free.</p>
                    </div>
                    <a href="mailto:gregdyche@gmail.com?subject=Consulting Inquiry" class="subscribe-cta-button">
                        Email Me
                    </a>
                </div>
            </div>
            {% endif %}
            
            <div class="card-content" data-editable="content">
                {{ page.content|safe }}
            </div>
        </article>
    </div>
    
    <!-- Blog Sections Navigation -->
    {% if page.slug == "well-scripted-life-by-greg-dyche" %}
    <section class="mt-12">
        <h2 class="text-center mb-8" style="font-size: 2rem; font-weight: 700; color: var(--text-primary);">Explore the Blog</h2>
        <div class="grid grid-cols-3">
            <a href="/blog/tech/" class="card card-clickable">
                <div class="card-header">
                    <h3 class="card-title">Technology Blog</h3>
                    <p class="card-subtitle">Code, Tools & Innovation</p>
                </div>
                <p class="card-content">Python development, AI/ML insights, development workflows, and emerging technologies.</p>
            </a>
            
            <a href="/blog/life/" class="card card-clickable">
                <div class="card-header">
                    <h3 class="card-title">Life Management</h3>
                    <p class="card-subtitle">Systems & Productivity</p>
                </div>
                <p class="card-content">Personal workflows, productivity systems, education insights, and life optimization.</p>
            </a>
            
            <a href="/blog/spirit/" class="card card-clickable">
                <div class="card-header">
                    <h3 class="card-title">Spiritual Growth</h3>
                    <p class="card-subtitle">Faith & Reflection</p>
                </div>
                <p class="card-content">Thoughts on faith, intentional living, and finding meaning in daily life.</p>
            </a>
        </div>
    </section>
    
    <section class="mt-12">
        <h2 class="text-center mb-8" style="font-size: 2rem; font-weight: 700; color: var(--text-primary);">Quick Access</h2>
        <div class="grid grid-cols-3">
            <a href="/blog/page/downloads/" class="card card-clickable">
                <div class="card-header">
                    <h3 class="card-title">Downloads</h3>
                    <p class="card-subtitle">Resources & Tools</p>
                </div>
                <p class="card-content">Access presentations, workbooks, and educational materials.</p>
            </a>
            
            <a href="/blog/page/tech-stack/" class="card card-clickable">
                <div class="card-header">
                    <h3 class="card-title">Tech Stack</h3>
                    <p class="card-subtitle">Tools & Setup</p>
                </div>
                <p class="card-content">My development environment, favorite tools, and technical workflows.</p>
            </a>
            
            <a href="/blog/page/about/" class="card card-clickable">
                <div class="card-header">
                    <h3 class="card-title">About Greg</h3>
                    <p class="card-subtitle">Background & Philosophy</p>
                </div>
                <p class="card-content">Learn about my background in education, technology, and life philosophy.</p>
            </a>
        </div>
    </section>
    {% endif %}
</div>
{% endblock %}
